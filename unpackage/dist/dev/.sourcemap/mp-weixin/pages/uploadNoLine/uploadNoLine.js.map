{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?87c5","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?0304","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?ff12","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?4474","uni-app:///pages/uploadNoLine/uploadNoLine.vue","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?c7be","webpack:///D:/project/vue/展汇通PDA（手机版）/pages/uploadNoLine/uploadNoLine.vue?ac3d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","list","options","type","countTotal","nowIndex","wuxiaoNum","onLoad","methods","clearTableClick","uni","url","getbaifenbi","toHome","openSQL","console","DB","then","catch","getZong","getYeji","toStartUpload","title","success","toUploadItem","exhId","unionid","userId","activityId","createTime","axios","setTimeout","params","doorId","updateBendiDB","where","index","delInvalidInfo","delWuxiaodata","content"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACa;;;AAGxE;AAC4M;AAC5M,gBAAgB,mNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAyyB,CAAgB,ozBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACmF7zB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;QACAC;MACA;MACAC;MAAA;MACAC;MAAA;;MAEAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IAEAC;MAEAC;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACAH;QACAC;MACA;IACA;IACA;IACAG;MAAA;MACA;MACA;MACAC;MACA;QACAC,6BACAC;UACAF;UACA;UACA;UACA;QACA,GACAG;UACAH;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAI;MAAA;MACAJ;MACAC;QACAD;QACA;MACA;QACA;MACA;IACA;IACA;IACAK;MAAA;MACA;MACA;MACA;MACA;MACA;MACAJ;QACA;MACA;QACAD;QACA;MACA;IACA;IACAM;MAAA;MACAX;QACAY;QACA;QACAC;UACA;YACA;cACA;YACA;cACA;YACA;UACA;YACAR;UACA;QACA;MACA;IACA;IACAS;MAAA;MAEA;QACA;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;QAEAd;QACA,YACAe,6CACAb;UACAF;UACA;YACA;UACA;YACA;YACAgB;cACA;YACA;UACA;QACA,GACAb;UACAH;QACA;MACA;QACA;QACA;UACAU;UACAO;YACAN;YACAC;YACAM;UACA;UACAJ;UACA;QACA;;QACA,YACAC,6CACAb;UACAF;UACA;YACA;UACA;YACA;YACAgB;cACA;YACA;UACA;QACA,GACAb;UAEAH;QACA;MACA;;MAEA;IACA;IACA;IACAmB;MAAA;MACA;MACA;QACAC;MACA;MACAnB;QACA;QACAoB;QACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MAEA;QACArB;QACA;MACA;IACA;IACA;IACAsB;MAAA;MACA;MACArB;QACAD;QACA;MACA;QACAA;QACA;MACA;IACA;IACA;IACAuB;MAAA;MACA5B;QACAY;QACAiB;QACAhB;UACA;YACAP;cACAD;cACA;cACA;YACA;cACA;YACA;UACA,yBACA;QACA;MACA;IAEA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AChTA;AAAA;AAAA;AAAA;AAAyoC,CAAgB,qnCAAG,EAAC,C;;;;;;;;;;;ACA7pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/uploadNoLine/uploadNoLine.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/uploadNoLine/uploadNoLine.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./uploadNoLine.vue?vue&type=template&id=5f70efc6&\"\nvar renderjs\nimport script from \"./uploadNoLine.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadNoLine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploadNoLine.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/uploadNoLine/uploadNoLine.vue\"\nexport default component.exports","export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadNoLine.vue?vue&type=template&id=5f70efc6&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.options.type == 1 ? _vm.list.length : null\n  var g1 = _vm.options.type == 2 ? _vm.list.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadNoLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadNoLine.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"colonn\">\r\n\t\t\t<block v-if=\"options.type==1\">\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<view  style=\"text-align: center;color: red;font-weight: bold;padding:20rpx 0rpx;\">总计：{{list.length-1}}条记录</view>\r\n\t\t\t\t<view class=\"roww rowsb border_bottom\" style=\"padding:20rpx 15rpx;\">\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">兼职姓名</view>\r\n\t\t\t\t\t<!-- <view class=\"allline\" style=\"text-align: center;\">电话</view> -->\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">核销数量</view>\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">门ID</view>\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">日期</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view  class=\"roww rowsb border_bottom\"\r\n\t\t\t\t style=\"padding:10rpx 15rpx;line-height: 50rpx;\"\r\n\t\t\t\t v-for=\"(item,index) in list\"\r\n\t\t\t\t :style=\"{\r\n\t\t\t\t\t 'background-color':item.loginName=='总核销人数'?'red':'white',\r\n\t\t\t\t\t 'color':item.loginName=='总核销人数'?'white':'#000000',\r\n\t\t\t\t }\"\r\n\t\t\t\t >\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">{{item.loginName}}</view>\r\n\t\t\t\t\t<!-- <view class=\"allline\" style=\"text-align: center;\">{{item.loginPhone}}</view> -->\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">{{item.count}}</view>\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\">{{item.doorId}}</view>\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\" v-if=\"item.loginName!='总核销人数'\">{{item.dayTime}}</view>\r\n\t\t\t\t\t<view class=\"allline\" style=\"text-align: center;\" v-else>{{item.dayTime}}人</view>\r\n\t\t\t\t</view>  \r\n\t\t\t\t\r\n\t\t\t\t  \r\n\t\t\t</block>\r\n\t\t\t<block v-if=\"options.type==2\">\r\n\t\t\t\t  \r\n\t\t\t\t<view class=\"roww rowsa center_center\">\r\n\t\t\t\t\t<view>上传进度</view>\r\n\t\t\t\t\t<progress  style=\"width: 500rpx;\" show-info \r\n\t\t\t\t\t:percent=\"nowIndex\"></progress>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view\r\n\t\t\t\t style=\"text-align: center;color: red;font-weight: bold;padding-top:20rpx;\"\r\n\t\t\t\t>总剩余待上传{{countTotal}}条<text style=\"color: blue;\"\r\n\t\t\t\t@longtap=\"delWuxiaodata\"\r\n\t\t\t\t>【无效数据有{{wuxiaoNum}}条】</text></view>\r\n\t\t\t\t<view style=\"text-align: center;color: red;font-weight: bold;padding:20rpx 0rpx;\">本页离线数据待上传（{{list.length}}条）\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"roww rowsb border_bottom\" style=\"padding:20rpx 15rpx;\">\r\n\t\t\t\t\t<view class=\"allline w-100\" style=\"text-align: center;\">兼职姓名</view>\r\n\t\t\t\t\t<view class=\"allline w-100\" style=\"text-align: center;\">客户手机号</view>\r\n\t\t\t\t\t<view class=\"allline w-550\" style=\"text-align: center;\">扫码时间</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view  class=\"roww rowsb border_bottom\"\r\n\t\t\t\t style=\"padding:10rpx 15rpx;\"\r\n\t\t\t\t v-for=\"(item,index) in list\">\r\n\t\t\t\t\t<view class=\"allline w-100\" style=\"text-align: center;\">{{item.loginName}}</view>\r\n\t\t\t\t\t<view class=\"allline w-100\" style=\"text-align: center;\">{{item.unionid}}</view>\r\n\t\t\t\t\t<view class=\"allline w-550\" style=\"text-align: center;\">{{item.createTime}}</view>\r\n\t\t\t\t</view>  \r\n\t\t\t</block>\r\n\t\t</view>   \r\n\t\t<view class=\"leftbo\" @longtap=\"toStartUpload\"\r\n\t\t>\r\n\t\t\t离线数据上传\r\n\t\t</view>\r\n\t\t<view class=\"centerbo yincang1\" @longtap=\"clearTableClick\"\r\n\t\t>\r\n\t\t\t清理表格\r\n\t\t</view>\r\n\t\t<view class=\"rightbo\" @click.stop=\"toHome\">\r\n\t\t\t返回首页\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\t\timport DB from '@/common/sqlite.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tlist:[],\r\n\t\t\t\toptions:{\r\n\t\t\t\t\ttype:2\r\n\t\t\t\t},\r\n\t\t\t\tcountTotal:0,//总个数\r\n\t\t\t\tnowIndex:0,//当前离线数据进度百分比\r\n\t\t\t\t\r\n\t\t\t\twuxiaoNum:0,\n\t\t\t}\n\t\t},\r\n\t\tonLoad(options){\r\n\t\t\t// this.options=options;\r\n\t\t\tthis.openSQL();\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\tclearTableClick(){   \r\n\t\t\t\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/clearData/clearData\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取百分比\r\n\t\t\tgetbaifenbi(index){\r\n\t\t\t\t// 进度百分比\r\n\t\t\t\tthis.nowIndex=index/this.list.length*100;\r\n\t\t\t\tthis.nowIndex=this.nowIndex.toFixed(0);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\ttoHome(){\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl:\"/pages/login/login\"\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t// 打开数据库\r\n\t\t\topenSQL() {\r\n\t\t\t\t// 这个是查询有没有打开数据库\r\n\t\t\t\tlet open = DB.isOpen();\r\n\t\t\t\tconsole.log(\"数据库状态\", open ? \"开启\" : \"关闭\");\r\n\t\t\t\tif (!open) {\r\n\t\t\t\t\tDB.openSqlite()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tconsole.log(\"数据库已打开\");\r\n\t\t\t\t\t\t\tthis.getYeji(\"scan_info\");\r\n\t\t\t\t\t\t\tthis.getZong(\"scan_info\");  \r\n\t\t\t\t\t\t\tthis.delInvalidInfo();\r\n\t\t\t\t\t\t})  \r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tconsole.log(\"数据库开启失败\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.getYeji(\"scan_info\");\r\n\t\t\t\t\t\tthis.getZong(\"scan_info\");  \r\n\t\t\t\t\t\t\tthis.delInvalidInfo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取总个数\r\n\t\t\tgetZong(tableName){\r\n\t\t\t\tconsole.log(\"总个数\",tableName)\r\n\t\t\t\tDB.selectgetTotalCont(tableName).then(res=>{\r\n\t\t\t\t\tconsole.log(\"总个数\",res)\r\n\t\t\t\t\tthis.countTotal=res[0].count;\r\n\t\t\t\t}).catch(error => {         \r\n\t\t\t\t\tthis.$tools.showToast(\"查询失败\");\r\n\t\t\t\t});  \r\n\t\t\t},\r\n\t\t\t// 获取离线数据\r\n\t\t\tgetYeji(tableName){\r\n\t\t\t\t// DB.selectTableData(tableName,'isUpload','false','isLine','false').then(res=>{\r\n\t\t\t\t// \tthis.list=res;\r\n\t\t\t\t// }).catch(error => {         \r\n\t\t\t\t// \tthis.$tools.showToast(\"查询失败\");\r\n\t\t\t\t// });   \r\n\t\t\t\tDB.selectTableData1(tableName,100).then(res=>{\r\n\t\t\t\t\tthis.list=res;\r\n\t\t\t\t}).catch(error => {      \r\n\t\t\t\t\tconsole.log('error',error)\r\n\t\t\t\t\tthis.$tools.showToast(\"查询失败\");\r\n\t\t\t\t});   \r\n\t\t\t},\r\n\t\t\ttoStartUpload(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle:\"提示\",\r\n\t\t\t\t\t\"content\":\"确定要上传吗？\",\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tif(this.list.length>0){\r\n\t\t\t\t\t\t\t\t\tthis.toUploadItem(this.list[0],0);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tthis.$tools.showToast(\"无离线数据。\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoUploadItem(info,index){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(info.activityId){\r\n\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\texhId: info.exhId,\r\n\t\t\t\t\t\t\tunionid:info.unionid,\r\n\t\t\t\t\t\t\tuserId:\"359\",\r\n\t\t\t\t\t\t\tactivityId:info.activityId,\r\n\t\t\t\t\t\t\tcreateTime:info.createTime\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(\"开始核销论坛\",this.$paths.activitypda,data)\r\n\t\t\t\t\t\tthis.$axios\r\n\t\t\t\t\t\t\t.axios('post', this.$paths.activitypda, data)\r\n\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"论坛结果\",res,res.code == 200)\r\n\t\t\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\t\t\tthis.updateBendiDB(info,index,'yes');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$tools.showToast(res.msg);\r\n\t\t\t\t\t\t\t\t\tsetTimeout(res=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.updateBendiDB(info,index,\"no\");\r\n\t\t\t\t\t\t\t\t\t},500)\r\n\t\t\t\t\t\t\t\t}  \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"报错\",err)\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// 扫码结果\r\n\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\texhId: info.exhId,\r\n\t\t\t\t\t\t\tparams: { \r\n\t\t\t\t\t\t\t\tunionid: info.unionid,\r\n\t\t\t\t\t\t\t\tuserId:  \"359\",\r\n\t\t\t\t\t\t\t\tdoorId:  info.doorId,\r\n\t\t\t\t\t\t\t},  \r\n\t\t\t\t\t\t\tcreateTime:info.createTime\r\n\t\t\t\t\t\t\t// 可以在这里添加大门信息\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.$axios\r\n\t\t\t\t\t\t\t.axios('post', this.$paths.visitpdaapi, data)\r\n\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"核销入口结果\", res)\r\n\t\t\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\t\t\tthis.updateBendiDB(info,index,'yes');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$tools.showToast(res.msg);\r\n\t\t\t\t\t\t\t\t\tsetTimeout(res=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.updateBendiDB(info,index,\"no\");\r\n\t\t\t\t\t\t\t\t\t},500)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(\"报错了\",err)\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t//////////////////////////\r\n\t\t\t},\r\n\t\t\t// 修改是否上传状态  参数3是否上传成功\r\n\t\t\tupdateBendiDB(info,index,isTrue){\r\n\t\t\t\tvar where='isUpload=\"true\"';\r\n\t\t\t\tif(isTrue=='no'){  \r\n\t\t\t\t\twhere='isUpload=\"no\"';\r\n\t\t\t\t}\r\n\t\t\t\tDB.updateTableData(\"scan_info\",where,'id',info.id).then(res=>{\r\n\t\t\t\t\tthis.$tools.showToast(info.id+\"上传成功\");\r\n\t\t\t\t\tindex=index+1;\r\n\t\t\t\t\tif(index<this.list.length){\r\n\t\t\t\t\t\t\tthis.toUploadItem(this.list[index],index);\r\n\t\t\t\t\t\t\t\tthis.getbaifenbi(index);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.getbaifenbi(index);\r\n\t\t\t\t\t\t\tthis.$tools.showToast(\"上传完成\");\r\n\t\t\t\t\t\t\tthis.nowIndex=0;  \r\n\t\t\t\t\t\t\tthis.getYeji(\"scan_info\");   \r\n\t\t\t\t\t\t\tthis.getZong(\"scan_info\");  \r\n\t\t\t\t\t\t\tthis.delInvalidInfo()\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.log(\"修改失败\",error)\r\n\t\t\t\t\tthis.$tools.showToast(\"修改失败\");\r\n\t\t\t\t}); \r\n\t\t\t},\r\n\t\t\t// 获取离线数据中无效数据的个数\r\n\t\t\tdelInvalidInfo(){\r\n\t\t\t\t// \r\n\t\t\t\tDB.selWuxiaoNum().then(res=>{\r\n\t\t\t\t\tconsole.log(\"获取离线数据中无效数据的个数\",res)  \r\n\t\t\t\t\tthis.wuxiaoNum=res[0].count;\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error(\"查询失败无效数量\",error)\r\n\t\t\t\t\tthis.$tools.showToast(\"无效数据查询失败\");\r\n\t\t\t\t}); \r\n\t\t\t},\r\n\t\t\t// 删除无效数据 \r\n\t\t\tdelWuxiaodata(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要删除无效数据吗？',\r\n\t\t\t\t\tsuccess:  (res1)=> {\r\n\t\t\t\t\t\tif (res1.confirm) {\r\n\t\t\t\t\t\t\tDB.delWuxiaodata().then(res=>{\r\n\t\t\t\t\t\t\t\tconsole.log(\"删除成功\",res);\r\n\t\t\t\t\t\t\t\tthis.$tools.showToast(\"无效数据删除成功\");\r\n\t\t\t\t\t\t\t\tthis.delInvalidInfo();\r\n\t\t\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t\t\tthis.$tools.showToast(\"无效数据删除失败\");\r\n\t\t\t\t\t\t\t}); \r\n\t\t\t\t\t\t} else if (res1.cancel) {\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\r\n\t.leftbo{\r\n\t\twidth: 200rpx;\r\n\t\theight: 50rpx;\r\n\t\tbackground-color: blue;\r\n\t\tcolor: white;\r\n\t\tline-height: 50rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\ttext-align: center;\r\n\t\tposition: fixed;\r\n\t\tbottom: 40rpx;\r\n\t\tpadding:0rpx 10rpx;\r\n\t\tleft: 40rpx;\r\n\t}\r\n\t\r\n\t.centerbo{\r\n\t\twidth: 300rpx;\r\n\t\theight: 50rpx;\r\n\t\tbackground-color: blue;\r\n\t\tcolor: white;\r\n\t\tline-height: 50rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\ttext-align: center;\r\n\t\tposition: fixed;\r\n\t\tbottom: 40rpx;\r\n\t\tpadding:0rpx 10rpx;\r\n\t\tleft: 250rpx;\r\n\t}\r\n\t\n.rightbo{\r\n\twidth: 150rpx;\r\n\theight: 50rpx;\r\n\tbackground-color: blue;\r\n\tcolor: white;\r\n\tline-height: 50rpx;\r\n\tborder-radius: 15rpx;\r\n\ttext-align: center;\r\n\tposition: fixed;\r\n\tbottom: 40rpx;\r\n\tright: 40rpx;\r\n}\n</style>\n","import mod from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadNoLine.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uploadNoLine.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1704859493750\n      var cssReload = require(\"E:/yangfei/ide/HBuilderX.3.5.2.2-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}